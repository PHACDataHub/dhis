apiVersion: dns.cnrm.cloud.google.com/v1beta1
kind: DNSManagedZone
metadata:
  name: dhis2-managed-zone
  namespace: cnrm-system
  annotations:
    cnrm.cloud.google.com/state-into-spec: merge
spec:
  cloudLoggingConfig:
    enableLogging: true
  description: DHIS2 DNS Zone for alpha DNS
  dnsName: dhis2.phac-aspc.alpha.canada.ca.
  visibility: public
---
apiVersion: dns.cnrm.cloud.google.com/v1beta1
kind: DNSRecordSet
metadata:
  name: dhis2-dns-record-set
  namespace: cnrm-system
  annotations:
    cnrm.cloud.google.com/state-into-spec: merge
spec:
  name: "dhis2.phac-aspc.alpha.canada.ca."
  type: A
  ttl: 300
  managedZoneRef:
    name: dhis2-managed-zone
  rrdatasRefs:
    - name: dhis2-external-ip
      kind: ComputeAddress
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: dhis2-external-ip
  namespace: cnrm-system
  annotations:
    cnrm.cloud.google.com/state-into-spec: merge
spec:
  addressType: EXTERNAL
  description: DHIS2 external ip address for ingress gateway
  location: northamerica-northeast1
  networkTier: STANDARD